%h1 Deliveries



%table.item_table
  %tr
    %th Product
    %th PO
    %th Order#
    %th Actual#
    %th Box#
    %th Pallet#
    %th Shipped
    %th Delivered
    %th
    %th
    - unless current_user.extern?
      %th

  - @deliveries.each do |delivery|
    %tr{:class => "#{cycle('even', 'odd')} #{delivery.quantity_consistent? ? '' : 'inconsistent'}"}
      %td
        = link_to delivery.product.item_code, product_path(delivery.product_id)
      %td= delivery.purchase_order
      %td= delivery.order_quantity
      %td= delivery.actual_quantity
      %td= delivery.num_boxes
      %td= delivery.pallets_needed
      %td= delivery.shipped_at
      %td= delivery.delivered_at
      %td= link_to 'Label', labels_deliveries_path(:format => 'pdf', :range => delivery.id), :target => '_blank'
      %td= link_to 'Edit', edit_delivery_path(delivery)
      - unless current_user.extern?
        %td= link_to 'Del', delivery, :confirm => 'Are you sure?', :method => :delete

.pagination
  = paginate @deliveries

= link_to 'New Delivery', new_delivery_path

.upload_form
  - unless current_user.extern?
    = form_tag inbound_deliveries_path, :multipart => true do
      = file_field_tag 'inbound_csv'
      = submit_tag "Upload Inbound"

  = form_tag outbound_deliveries_path, :multipart => true do
    = file_field_tag 'outbound_csv'
    = submit_tag "Upload Outbound"
